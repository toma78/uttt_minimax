#ifndef CONSTANTS_H
#define CONSTANTS_H
#include <inttypes.h>

typedef unsigned char move_type;
typedef unsigned short board_type;

#define IBSTR "0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0"
#define IMBSTR "-1,-1,-1,-1,-1,-1,-1,-1,-1"
#define ITURN 1
#define INMOVE 0

#define P1VICTORY_VAL  10000000
#define P2VICTORY_VAL -10000000
#define DRAW_VAL 0

#define BFULL 511

#define is_full(num) ((num)==BFULL)
#define isset(board, i) ((board)&(1<<(i)))

#define is_vic(num) board_victory[num]
#define opp_turn(turn) (1 + (turn & 1)) // ((turn==2)? 1:2)

#define NOMOVE 255
#define code_move(mbi, bi) ((bi)|((mbi)<<4))
#define MOVE_MBI(m) (((m)>>4)&15)
#define MOVE_BI(m)  ((m)&15)
#define decode_move(mbi, bi, m) unsigned int bi=m&15; unsigned int mbi=(m>>4)&15;

#define VICTORY_MOVE	1  
#define THREAT_MOVE		2
#define TBLOCK_MOVE		4
#define OVER_MOVE		8

#define VCODE 4
#define TCODE 3
#define PCODE 2
#define OCODE 1
#define DCODE 0

// determine if move is board victory move
#define is_vmove(pos, m) board_victory[pos->boards[pos->turn][(m>>4)&15]|(1<<(m&15))]

// determine boards where there could be a macro victory move 
#define mbvmove_mb(pos) (third_place[pos->overs[pos->turn]]&pos->validmb)

static const int board_victory[512] = {
	0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,
	1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,1,1,1,1,0,1,0,1,1,1,
	1,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,
	0,0,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,1,1,0,0,1,1,1,1,1,1,
	1,1,1,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,1,0,
	1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,
	0,1,0,1,0,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,
	1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,0,0,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,
	1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,1,1,1,
	1,0,0,0,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 };

static const int mask2num[512] = {
	0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5,
	1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
	1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
	2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
	1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
	2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
	2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
	3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8,
	1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6,
	2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
	2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
	3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8,
	2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6, 3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7,
	3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8,
	3, 4, 4, 5, 4, 5, 5, 6, 4, 5, 5, 6, 5, 6, 6, 7, 4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8,
	4, 5, 5, 6, 5, 6, 6, 7, 5, 6, 6, 7, 6, 7, 7, 8, 5, 6, 6, 7, 6, 7, 7, 8, 6, 7, 7, 8, 7, 8, 8, 9 };

static const board_type third_place[512] = {
	0,0,0,4,0,2,1,0,0,64,0,68,0,66,1,0,0,256,128,388,64,322,193,0,32,352,160,484,96,354,225,
	0,0,0,0,4,256,258,257,0,16,80,16,84,272,338,273,0,8,264,136,396,328,330,457,0,0,0,0,0,0,0,
	0,0,0,8,0,12,16,26,17,0,1,0,1,0,17,0,17,0,4,268,132,396,0,0,0,0,37,0,165,0,0,0,0,0,0,8,0,12,
	272,282,273,0,17,0,17,0,273,0,273,0,12,268,140,396,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,20,0,2,17,
	0,0,64,16,84,0,66,17,0,2,258,0,0,66,322,0,0,34,354,0,0,98,354,0,0,0,0,16,20,256,258,273,0,
	16,80,16,84,272,338,273,0,10,266,0,0,330,330,0,0,0,0,0,0,0,0,0,0,256,264,272,284,272,282,
	273,0,257,0,273,0,273,0,273,0,262,270,0,0,0,0,0,0,295,0,0,0,0,0,0,0,256,264,272,284,272,282,
	273,0,273,0,273,0,273,0,273,0,270,270,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,20,32,50,33,0,0,80,
	0,84,32,114,33,0,1,0,129,0,97,0,225,0,33,0,161,0,97,0,225,0,4,20,4,20,0,0,0,0,20,84,20,84,0,
	0,0,0,13,0,141,0,0,0,0,0,0,0,0,0,0,0,0,0,128,152,128,156,176,186,177,0,129,0,129,0,177,0,177,
	0,133,0,133,0,0,0,0,0,165,0,165,0,0,0,0,0,132,156,132,156,0,0,0,0,149,0,149,0,0,0,0,0,141,0,
	141,0,0,0,0,0,0,0,0,0,0,0,0,0,64,80,80,84,96,114,113,0,64,80,80,84,96,114,113,0,67,0,0,0,99,
	0,0,0,99,0,0,0,99,0,0,0,68,84,84,84,0,0,0,0,84,84,84,84,0,0,0,0,79,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 };

static const char free_board_moves[512][10] = {
	{ 9,0,1,2,3,4,5,6,7,8 },{ 8,1,2,3,4,5,6,7,8,0 },{ 8,0,2,3,4,5,6,7,8,0 },{ 7,2,3,4,5,6,7,8,0,0 },
	{ 8,0,1,3,4,5,6,7,8,0 },{ 7,1,3,4,5,6,7,8,0,0 },{ 7,0,3,4,5,6,7,8,0,0 },{ 6,3,4,5,6,7,8,0,0,0 },
	{ 8,0,1,2,4,5,6,7,8,0 },{ 7,1,2,4,5,6,7,8,0,0 },{ 7,0,2,4,5,6,7,8,0,0 },{ 6,2,4,5,6,7,8,0,0,0 },
	{ 7,0,1,4,5,6,7,8,0,0 },{ 6,1,4,5,6,7,8,0,0,0 },{ 6,0,4,5,6,7,8,0,0,0 },{ 5,4,5,6,7,8,0,0,0,0 },
	{ 8,0,1,2,3,5,6,7,8,0 },{ 7,1,2,3,5,6,7,8,0,0 },{ 7,0,2,3,5,6,7,8,0,0 },{ 6,2,3,5,6,7,8,0,0,0 },
	{ 7,0,1,3,5,6,7,8,0,0 },{ 6,1,3,5,6,7,8,0,0,0 },{ 6,0,3,5,6,7,8,0,0,0 },{ 5,3,5,6,7,8,0,0,0,0 },
	{ 7,0,1,2,5,6,7,8,0,0 },{ 6,1,2,5,6,7,8,0,0,0 },{ 6,0,2,5,6,7,8,0,0,0 },{ 5,2,5,6,7,8,0,0,0,0 },
	{ 6,0,1,5,6,7,8,0,0,0 },{ 5,1,5,6,7,8,0,0,0,0 },{ 5,0,5,6,7,8,0,0,0,0 },{ 4,5,6,7,8,0,0,0,0,0 },
	{ 8,0,1,2,3,4,6,7,8,0 },{ 7,1,2,3,4,6,7,8,0,0 },{ 7,0,2,3,4,6,7,8,0,0 },{ 6,2,3,4,6,7,8,0,0,0 },
	{ 7,0,1,3,4,6,7,8,0,0 },{ 6,1,3,4,6,7,8,0,0,0 },{ 6,0,3,4,6,7,8,0,0,0 },{ 5,3,4,6,7,8,0,0,0,0 },
	{ 7,0,1,2,4,6,7,8,0,0 },{ 6,1,2,4,6,7,8,0,0,0 },{ 6,0,2,4,6,7,8,0,0,0 },{ 5,2,4,6,7,8,0,0,0,0 },
	{ 6,0,1,4,6,7,8,0,0,0 },{ 5,1,4,6,7,8,0,0,0,0 },{ 5,0,4,6,7,8,0,0,0,0 },{ 4,4,6,7,8,0,0,0,0,0 },
	{ 7,0,1,2,3,6,7,8,0,0 },{ 6,1,2,3,6,7,8,0,0,0 },{ 6,0,2,3,6,7,8,0,0,0 },{ 5,2,3,6,7,8,0,0,0,0 },
	{ 6,0,1,3,6,7,8,0,0,0 },{ 5,1,3,6,7,8,0,0,0,0 },{ 5,0,3,6,7,8,0,0,0,0 },{ 4,3,6,7,8,0,0,0,0,0 },
	{ 6,0,1,2,6,7,8,0,0,0 },{ 5,1,2,6,7,8,0,0,0,0 },{ 5,0,2,6,7,8,0,0,0,0 },{ 4,2,6,7,8,0,0,0,0,0 },
	{ 5,0,1,6,7,8,0,0,0,0 },{ 4,1,6,7,8,0,0,0,0,0 },{ 4,0,6,7,8,0,0,0,0,0 },{ 3,6,7,8,0,0,0,0,0,0 },
	{ 8,0,1,2,3,4,5,7,8,0 },{ 7,1,2,3,4,5,7,8,0,0 },{ 7,0,2,3,4,5,7,8,0,0 },{ 6,2,3,4,5,7,8,0,0,0 },
	{ 7,0,1,3,4,5,7,8,0,0 },{ 6,1,3,4,5,7,8,0,0,0 },{ 6,0,3,4,5,7,8,0,0,0 },{ 5,3,4,5,7,8,0,0,0,0 },
	{ 7,0,1,2,4,5,7,8,0,0 },{ 6,1,2,4,5,7,8,0,0,0 },{ 6,0,2,4,5,7,8,0,0,0 },{ 5,2,4,5,7,8,0,0,0,0 },
	{ 6,0,1,4,5,7,8,0,0,0 },{ 5,1,4,5,7,8,0,0,0,0 },{ 5,0,4,5,7,8,0,0,0,0 },{ 4,4,5,7,8,0,0,0,0,0 },
	{ 7,0,1,2,3,5,7,8,0,0 },{ 6,1,2,3,5,7,8,0,0,0 },{ 6,0,2,3,5,7,8,0,0,0 },{ 5,2,3,5,7,8,0,0,0,0 },
	{ 6,0,1,3,5,7,8,0,0,0 },{ 5,1,3,5,7,8,0,0,0,0 },{ 5,0,3,5,7,8,0,0,0,0 },{ 4,3,5,7,8,0,0,0,0,0 },
	{ 6,0,1,2,5,7,8,0,0,0 },{ 5,1,2,5,7,8,0,0,0,0 },{ 5,0,2,5,7,8,0,0,0,0 },{ 4,2,5,7,8,0,0,0,0,0 },
	{ 5,0,1,5,7,8,0,0,0,0 },{ 4,1,5,7,8,0,0,0,0,0 },{ 4,0,5,7,8,0,0,0,0,0 },{ 3,5,7,8,0,0,0,0,0,0 },
	{ 7,0,1,2,3,4,7,8,0,0 },{ 6,1,2,3,4,7,8,0,0,0 },{ 6,0,2,3,4,7,8,0,0,0 },{ 5,2,3,4,7,8,0,0,0,0 },
	{ 6,0,1,3,4,7,8,0,0,0 },{ 5,1,3,4,7,8,0,0,0,0 },{ 5,0,3,4,7,8,0,0,0,0 },{ 4,3,4,7,8,0,0,0,0,0 },
	{ 6,0,1,2,4,7,8,0,0,0 },{ 5,1,2,4,7,8,0,0,0,0 },{ 5,0,2,4,7,8,0,0,0,0 },{ 4,2,4,7,8,0,0,0,0,0 },
	{ 5,0,1,4,7,8,0,0,0,0 },{ 4,1,4,7,8,0,0,0,0,0 },{ 4,0,4,7,8,0,0,0,0,0 },{ 3,4,7,8,0,0,0,0,0,0 },
	{ 6,0,1,2,3,7,8,0,0,0 },{ 5,1,2,3,7,8,0,0,0,0 },{ 5,0,2,3,7,8,0,0,0,0 },{ 4,2,3,7,8,0,0,0,0,0 },
	{ 5,0,1,3,7,8,0,0,0,0 },{ 4,1,3,7,8,0,0,0,0,0 },{ 4,0,3,7,8,0,0,0,0,0 },{ 3,3,7,8,0,0,0,0,0,0 },
	{ 5,0,1,2,7,8,0,0,0,0 },{ 4,1,2,7,8,0,0,0,0,0 },{ 4,0,2,7,8,0,0,0,0,0 },{ 3,2,7,8,0,0,0,0,0,0 },
	{ 4,0,1,7,8,0,0,0,0,0 },{ 3,1,7,8,0,0,0,0,0,0 },{ 3,0,7,8,0,0,0,0,0,0 },{ 2,7,8,0,0,0,0,0,0,0 },
	{ 8,0,1,2,3,4,5,6,8,0 },{ 7,1,2,3,4,5,6,8,0,0 },{ 7,0,2,3,4,5,6,8,0,0 },{ 6,2,3,4,5,6,8,0,0,0 },
	{ 7,0,1,3,4,5,6,8,0,0 },{ 6,1,3,4,5,6,8,0,0,0 },{ 6,0,3,4,5,6,8,0,0,0 },{ 5,3,4,5,6,8,0,0,0,0 },
	{ 7,0,1,2,4,5,6,8,0,0 },{ 6,1,2,4,5,6,8,0,0,0 },{ 6,0,2,4,5,6,8,0,0,0 },{ 5,2,4,5,6,8,0,0,0,0 },
	{ 6,0,1,4,5,6,8,0,0,0 },{ 5,1,4,5,6,8,0,0,0,0 },{ 5,0,4,5,6,8,0,0,0,0 },{ 4,4,5,6,8,0,0,0,0,0 },
	{ 7,0,1,2,3,5,6,8,0,0 },{ 6,1,2,3,5,6,8,0,0,0 },{ 6,0,2,3,5,6,8,0,0,0 },{ 5,2,3,5,6,8,0,0,0,0 },
	{ 6,0,1,3,5,6,8,0,0,0 },{ 5,1,3,5,6,8,0,0,0,0 },{ 5,0,3,5,6,8,0,0,0,0 },{ 4,3,5,6,8,0,0,0,0,0 },
	{ 6,0,1,2,5,6,8,0,0,0 },{ 5,1,2,5,6,8,0,0,0,0 },{ 5,0,2,5,6,8,0,0,0,0 },{ 4,2,5,6,8,0,0,0,0,0 },
	{ 5,0,1,5,6,8,0,0,0,0 },{ 4,1,5,6,8,0,0,0,0,0 },{ 4,0,5,6,8,0,0,0,0,0 },{ 3,5,6,8,0,0,0,0,0,0 },
	{ 7,0,1,2,3,4,6,8,0,0 },{ 6,1,2,3,4,6,8,0,0,0 },{ 6,0,2,3,4,6,8,0,0,0 },{ 5,2,3,4,6,8,0,0,0,0 },
	{ 6,0,1,3,4,6,8,0,0,0 },{ 5,1,3,4,6,8,0,0,0,0 },{ 5,0,3,4,6,8,0,0,0,0 },{ 4,3,4,6,8,0,0,0,0,0 },
	{ 6,0,1,2,4,6,8,0,0,0 },{ 5,1,2,4,6,8,0,0,0,0 },{ 5,0,2,4,6,8,0,0,0,0 },{ 4,2,4,6,8,0,0,0,0,0 },
	{ 5,0,1,4,6,8,0,0,0,0 },{ 4,1,4,6,8,0,0,0,0,0 },{ 4,0,4,6,8,0,0,0,0,0 },{ 3,4,6,8,0,0,0,0,0,0 },
	{ 6,0,1,2,3,6,8,0,0,0 },{ 5,1,2,3,6,8,0,0,0,0 },{ 5,0,2,3,6,8,0,0,0,0 },{ 4,2,3,6,8,0,0,0,0,0 },
	{ 5,0,1,3,6,8,0,0,0,0 },{ 4,1,3,6,8,0,0,0,0,0 },{ 4,0,3,6,8,0,0,0,0,0 },{ 3,3,6,8,0,0,0,0,0,0 },
	{ 5,0,1,2,6,8,0,0,0,0 },{ 4,1,2,6,8,0,0,0,0,0 },{ 4,0,2,6,8,0,0,0,0,0 },{ 3,2,6,8,0,0,0,0,0,0 },
	{ 4,0,1,6,8,0,0,0,0,0 },{ 3,1,6,8,0,0,0,0,0,0 },{ 3,0,6,8,0,0,0,0,0,0 },{ 2,6,8,0,0,0,0,0,0,0 },
	{ 7,0,1,2,3,4,5,8,0,0 },{ 6,1,2,3,4,5,8,0,0,0 },{ 6,0,2,3,4,5,8,0,0,0 },{ 5,2,3,4,5,8,0,0,0,0 },
	{ 6,0,1,3,4,5,8,0,0,0 },{ 5,1,3,4,5,8,0,0,0,0 },{ 5,0,3,4,5,8,0,0,0,0 },{ 4,3,4,5,8,0,0,0,0,0 },
	{ 6,0,1,2,4,5,8,0,0,0 },{ 5,1,2,4,5,8,0,0,0,0 },{ 5,0,2,4,5,8,0,0,0,0 },{ 4,2,4,5,8,0,0,0,0,0 },
	{ 5,0,1,4,5,8,0,0,0,0 },{ 4,1,4,5,8,0,0,0,0,0 },{ 4,0,4,5,8,0,0,0,0,0 },{ 3,4,5,8,0,0,0,0,0,0 },
	{ 6,0,1,2,3,5,8,0,0,0 },{ 5,1,2,3,5,8,0,0,0,0 },{ 5,0,2,3,5,8,0,0,0,0 },{ 4,2,3,5,8,0,0,0,0,0 },
	{ 5,0,1,3,5,8,0,0,0,0 },{ 4,1,3,5,8,0,0,0,0,0 },{ 4,0,3,5,8,0,0,0,0,0 },{ 3,3,5,8,0,0,0,0,0,0 },
	{ 5,0,1,2,5,8,0,0,0,0 },{ 4,1,2,5,8,0,0,0,0,0 },{ 4,0,2,5,8,0,0,0,0,0 },{ 3,2,5,8,0,0,0,0,0,0 },
	{ 4,0,1,5,8,0,0,0,0,0 },{ 3,1,5,8,0,0,0,0,0,0 },{ 3,0,5,8,0,0,0,0,0,0 },{ 2,5,8,0,0,0,0,0,0,0 },
	{ 6,0,1,2,3,4,8,0,0,0 },{ 5,1,2,3,4,8,0,0,0,0 },{ 5,0,2,3,4,8,0,0,0,0 },{ 4,2,3,4,8,0,0,0,0,0 },
	{ 5,0,1,3,4,8,0,0,0,0 },{ 4,1,3,4,8,0,0,0,0,0 },{ 4,0,3,4,8,0,0,0,0,0 },{ 3,3,4,8,0,0,0,0,0,0 },
	{ 5,0,1,2,4,8,0,0,0,0 },{ 4,1,2,4,8,0,0,0,0,0 },{ 4,0,2,4,8,0,0,0,0,0 },{ 3,2,4,8,0,0,0,0,0,0 },
	{ 4,0,1,4,8,0,0,0,0,0 },{ 3,1,4,8,0,0,0,0,0,0 },{ 3,0,4,8,0,0,0,0,0,0 },{ 2,4,8,0,0,0,0,0,0,0 },
	{ 5,0,1,2,3,8,0,0,0,0 },{ 4,1,2,3,8,0,0,0,0,0 },{ 4,0,2,3,8,0,0,0,0,0 },{ 3,2,3,8,0,0,0,0,0,0 },
	{ 4,0,1,3,8,0,0,0,0,0 },{ 3,1,3,8,0,0,0,0,0,0 },{ 3,0,3,8,0,0,0,0,0,0 },{ 2,3,8,0,0,0,0,0,0,0 },
	{ 4,0,1,2,8,0,0,0,0,0 },{ 3,1,2,8,0,0,0,0,0,0 },{ 3,0,2,8,0,0,0,0,0,0 },{ 2,2,8,0,0,0,0,0,0,0 },
	{ 3,0,1,8,0,0,0,0,0,0 },{ 2,1,8,0,0,0,0,0,0,0 },{ 2,0,8,0,0,0,0,0,0,0 },{ 1,8,0,0,0,0,0,0,0,0 },
	{ 8,0,1,2,3,4,5,6,7,0 },{ 7,1,2,3,4,5,6,7,0,0 },{ 7,0,2,3,4,5,6,7,0,0 },{ 6,2,3,4,5,6,7,0,0,0 },
	{ 7,0,1,3,4,5,6,7,0,0 },{ 6,1,3,4,5,6,7,0,0,0 },{ 6,0,3,4,5,6,7,0,0,0 },{ 5,3,4,5,6,7,0,0,0,0 },
	{ 7,0,1,2,4,5,6,7,0,0 },{ 6,1,2,4,5,6,7,0,0,0 },{ 6,0,2,4,5,6,7,0,0,0 },{ 5,2,4,5,6,7,0,0,0,0 },
	{ 6,0,1,4,5,6,7,0,0,0 },{ 5,1,4,5,6,7,0,0,0,0 },{ 5,0,4,5,6,7,0,0,0,0 },{ 4,4,5,6,7,0,0,0,0,0 },
	{ 7,0,1,2,3,5,6,7,0,0 },{ 6,1,2,3,5,6,7,0,0,0 },{ 6,0,2,3,5,6,7,0,0,0 },{ 5,2,3,5,6,7,0,0,0,0 },
	{ 6,0,1,3,5,6,7,0,0,0 },{ 5,1,3,5,6,7,0,0,0,0 },{ 5,0,3,5,6,7,0,0,0,0 },{ 4,3,5,6,7,0,0,0,0,0 },
	{ 6,0,1,2,5,6,7,0,0,0 },{ 5,1,2,5,6,7,0,0,0,0 },{ 5,0,2,5,6,7,0,0,0,0 },{ 4,2,5,6,7,0,0,0,0,0 },
	{ 5,0,1,5,6,7,0,0,0,0 },{ 4,1,5,6,7,0,0,0,0,0 },{ 4,0,5,6,7,0,0,0,0,0 },{ 3,5,6,7,0,0,0,0,0,0 },
	{ 7,0,1,2,3,4,6,7,0,0 },{ 6,1,2,3,4,6,7,0,0,0 },{ 6,0,2,3,4,6,7,0,0,0 },{ 5,2,3,4,6,7,0,0,0,0 },
	{ 6,0,1,3,4,6,7,0,0,0 },{ 5,1,3,4,6,7,0,0,0,0 },{ 5,0,3,4,6,7,0,0,0,0 },{ 4,3,4,6,7,0,0,0,0,0 },
	{ 6,0,1,2,4,6,7,0,0,0 },{ 5,1,2,4,6,7,0,0,0,0 },{ 5,0,2,4,6,7,0,0,0,0 },{ 4,2,4,6,7,0,0,0,0,0 },
	{ 5,0,1,4,6,7,0,0,0,0 },{ 4,1,4,6,7,0,0,0,0,0 },{ 4,0,4,6,7,0,0,0,0,0 },{ 3,4,6,7,0,0,0,0,0,0 },
	{ 6,0,1,2,3,6,7,0,0,0 },{ 5,1,2,3,6,7,0,0,0,0 },{ 5,0,2,3,6,7,0,0,0,0 },{ 4,2,3,6,7,0,0,0,0,0 },
	{ 5,0,1,3,6,7,0,0,0,0 },{ 4,1,3,6,7,0,0,0,0,0 },{ 4,0,3,6,7,0,0,0,0,0 },{ 3,3,6,7,0,0,0,0,0,0 },
	{ 5,0,1,2,6,7,0,0,0,0 },{ 4,1,2,6,7,0,0,0,0,0 },{ 4,0,2,6,7,0,0,0,0,0 },{ 3,2,6,7,0,0,0,0,0,0 },
	{ 4,0,1,6,7,0,0,0,0,0 },{ 3,1,6,7,0,0,0,0,0,0 },{ 3,0,6,7,0,0,0,0,0,0 },{ 2,6,7,0,0,0,0,0,0,0 },
	{ 7,0,1,2,3,4,5,7,0,0 },{ 6,1,2,3,4,5,7,0,0,0 },{ 6,0,2,3,4,5,7,0,0,0 },{ 5,2,3,4,5,7,0,0,0,0 },
	{ 6,0,1,3,4,5,7,0,0,0 },{ 5,1,3,4,5,7,0,0,0,0 },{ 5,0,3,4,5,7,0,0,0,0 },{ 4,3,4,5,7,0,0,0,0,0 },
	{ 6,0,1,2,4,5,7,0,0,0 },{ 5,1,2,4,5,7,0,0,0,0 },{ 5,0,2,4,5,7,0,0,0,0 },{ 4,2,4,5,7,0,0,0,0,0 },
	{ 5,0,1,4,5,7,0,0,0,0 },{ 4,1,4,5,7,0,0,0,0,0 },{ 4,0,4,5,7,0,0,0,0,0 },{ 3,4,5,7,0,0,0,0,0,0 },
	{ 6,0,1,2,3,5,7,0,0,0 },{ 5,1,2,3,5,7,0,0,0,0 },{ 5,0,2,3,5,7,0,0,0,0 },{ 4,2,3,5,7,0,0,0,0,0 },
	{ 5,0,1,3,5,7,0,0,0,0 },{ 4,1,3,5,7,0,0,0,0,0 },{ 4,0,3,5,7,0,0,0,0,0 },{ 3,3,5,7,0,0,0,0,0,0 },
	{ 5,0,1,2,5,7,0,0,0,0 },{ 4,1,2,5,7,0,0,0,0,0 },{ 4,0,2,5,7,0,0,0,0,0 },{ 3,2,5,7,0,0,0,0,0,0 },
	{ 4,0,1,5,7,0,0,0,0,0 },{ 3,1,5,7,0,0,0,0,0,0 },{ 3,0,5,7,0,0,0,0,0,0 },{ 2,5,7,0,0,0,0,0,0,0 },
	{ 6,0,1,2,3,4,7,0,0,0 },{ 5,1,2,3,4,7,0,0,0,0 },{ 5,0,2,3,4,7,0,0,0,0 },{ 4,2,3,4,7,0,0,0,0,0 },
	{ 5,0,1,3,4,7,0,0,0,0 },{ 4,1,3,4,7,0,0,0,0,0 },{ 4,0,3,4,7,0,0,0,0,0 },{ 3,3,4,7,0,0,0,0,0,0 },
	{ 5,0,1,2,4,7,0,0,0,0 },{ 4,1,2,4,7,0,0,0,0,0 },{ 4,0,2,4,7,0,0,0,0,0 },{ 3,2,4,7,0,0,0,0,0,0 },
	{ 4,0,1,4,7,0,0,0,0,0 },{ 3,1,4,7,0,0,0,0,0,0 },{ 3,0,4,7,0,0,0,0,0,0 },{ 2,4,7,0,0,0,0,0,0,0 },
	{ 5,0,1,2,3,7,0,0,0,0 },{ 4,1,2,3,7,0,0,0,0,0 },{ 4,0,2,3,7,0,0,0,0,0 },{ 3,2,3,7,0,0,0,0,0,0 },
	{ 4,0,1,3,7,0,0,0,0,0 },{ 3,1,3,7,0,0,0,0,0,0 },{ 3,0,3,7,0,0,0,0,0,0 },{ 2,3,7,0,0,0,0,0,0,0 },
	{ 4,0,1,2,7,0,0,0,0,0 },{ 3,1,2,7,0,0,0,0,0,0 },{ 3,0,2,7,0,0,0,0,0,0 },{ 2,2,7,0,0,0,0,0,0,0 },
	{ 3,0,1,7,0,0,0,0,0,0 },{ 2,1,7,0,0,0,0,0,0,0 },{ 2,0,7,0,0,0,0,0,0,0 },{ 1,7,0,0,0,0,0,0,0,0 },
	{ 7,0,1,2,3,4,5,6,0,0 },{ 6,1,2,3,4,5,6,0,0,0 },{ 6,0,2,3,4,5,6,0,0,0 },{ 5,2,3,4,5,6,0,0,0,0 },
	{ 6,0,1,3,4,5,6,0,0,0 },{ 5,1,3,4,5,6,0,0,0,0 },{ 5,0,3,4,5,6,0,0,0,0 },{ 4,3,4,5,6,0,0,0,0,0 },
	{ 6,0,1,2,4,5,6,0,0,0 },{ 5,1,2,4,5,6,0,0,0,0 },{ 5,0,2,4,5,6,0,0,0,0 },{ 4,2,4,5,6,0,0,0,0,0 },
	{ 5,0,1,4,5,6,0,0,0,0 },{ 4,1,4,5,6,0,0,0,0,0 },{ 4,0,4,5,6,0,0,0,0,0 },{ 3,4,5,6,0,0,0,0,0,0 },
	{ 6,0,1,2,3,5,6,0,0,0 },{ 5,1,2,3,5,6,0,0,0,0 },{ 5,0,2,3,5,6,0,0,0,0 },{ 4,2,3,5,6,0,0,0,0,0 },
	{ 5,0,1,3,5,6,0,0,0,0 },{ 4,1,3,5,6,0,0,0,0,0 },{ 4,0,3,5,6,0,0,0,0,0 },{ 3,3,5,6,0,0,0,0,0,0 },
	{ 5,0,1,2,5,6,0,0,0,0 },{ 4,1,2,5,6,0,0,0,0,0 },{ 4,0,2,5,6,0,0,0,0,0 },{ 3,2,5,6,0,0,0,0,0,0 },
	{ 4,0,1,5,6,0,0,0,0,0 },{ 3,1,5,6,0,0,0,0,0,0 },{ 3,0,5,6,0,0,0,0,0,0 },{ 2,5,6,0,0,0,0,0,0,0 },
	{ 6,0,1,2,3,4,6,0,0,0 },{ 5,1,2,3,4,6,0,0,0,0 },{ 5,0,2,3,4,6,0,0,0,0 },{ 4,2,3,4,6,0,0,0,0,0 },
	{ 5,0,1,3,4,6,0,0,0,0 },{ 4,1,3,4,6,0,0,0,0,0 },{ 4,0,3,4,6,0,0,0,0,0 },{ 3,3,4,6,0,0,0,0,0,0 },
	{ 5,0,1,2,4,6,0,0,0,0 },{ 4,1,2,4,6,0,0,0,0,0 },{ 4,0,2,4,6,0,0,0,0,0 },{ 3,2,4,6,0,0,0,0,0,0 },
	{ 4,0,1,4,6,0,0,0,0,0 },{ 3,1,4,6,0,0,0,0,0,0 },{ 3,0,4,6,0,0,0,0,0,0 },{ 2,4,6,0,0,0,0,0,0,0 },
	{ 5,0,1,2,3,6,0,0,0,0 },{ 4,1,2,3,6,0,0,0,0,0 },{ 4,0,2,3,6,0,0,0,0,0 },{ 3,2,3,6,0,0,0,0,0,0 },
	{ 4,0,1,3,6,0,0,0,0,0 },{ 3,1,3,6,0,0,0,0,0,0 },{ 3,0,3,6,0,0,0,0,0,0 },{ 2,3,6,0,0,0,0,0,0,0 },
	{ 4,0,1,2,6,0,0,0,0,0 },{ 3,1,2,6,0,0,0,0,0,0 },{ 3,0,2,6,0,0,0,0,0,0 },{ 2,2,6,0,0,0,0,0,0,0 },
	{ 3,0,1,6,0,0,0,0,0,0 },{ 2,1,6,0,0,0,0,0,0,0 },{ 2,0,6,0,0,0,0,0,0,0 },{ 1,6,0,0,0,0,0,0,0,0 },
	{ 6,0,1,2,3,4,5,0,0,0 },{ 5,1,2,3,4,5,0,0,0,0 },{ 5,0,2,3,4,5,0,0,0,0 },{ 4,2,3,4,5,0,0,0,0,0 },
	{ 5,0,1,3,4,5,0,0,0,0 },{ 4,1,3,4,5,0,0,0,0,0 },{ 4,0,3,4,5,0,0,0,0,0 },{ 3,3,4,5,0,0,0,0,0,0 },
	{ 5,0,1,2,4,5,0,0,0,0 },{ 4,1,2,4,5,0,0,0,0,0 },{ 4,0,2,4,5,0,0,0,0,0 },{ 3,2,4,5,0,0,0,0,0,0 },
	{ 4,0,1,4,5,0,0,0,0,0 },{ 3,1,4,5,0,0,0,0,0,0 },{ 3,0,4,5,0,0,0,0,0,0 },{ 2,4,5,0,0,0,0,0,0,0 },
	{ 5,0,1,2,3,5,0,0,0,0 },{ 4,1,2,3,5,0,0,0,0,0 },{ 4,0,2,3,5,0,0,0,0,0 },{ 3,2,3,5,0,0,0,0,0,0 },
	{ 4,0,1,3,5,0,0,0,0,0 },{ 3,1,3,5,0,0,0,0,0,0 },{ 3,0,3,5,0,0,0,0,0,0 },{ 2,3,5,0,0,0,0,0,0,0 },
	{ 4,0,1,2,5,0,0,0,0,0 },{ 3,1,2,5,0,0,0,0,0,0 },{ 3,0,2,5,0,0,0,0,0,0 },{ 2,2,5,0,0,0,0,0,0,0 },
	{ 3,0,1,5,0,0,0,0,0,0 },{ 2,1,5,0,0,0,0,0,0,0 },{ 2,0,5,0,0,0,0,0,0,0 },{ 1,5,0,0,0,0,0,0,0,0 },
	{ 5,0,1,2,3,4,0,0,0,0 },{ 4,1,2,3,4,0,0,0,0,0 },{ 4,0,2,3,4,0,0,0,0,0 },{ 3,2,3,4,0,0,0,0,0,0 },
	{ 4,0,1,3,4,0,0,0,0,0 },{ 3,1,3,4,0,0,0,0,0,0 },{ 3,0,3,4,0,0,0,0,0,0 },{ 2,3,4,0,0,0,0,0,0,0 },
	{ 4,0,1,2,4,0,0,0,0,0 },{ 3,1,2,4,0,0,0,0,0,0 },{ 3,0,2,4,0,0,0,0,0,0 },{ 2,2,4,0,0,0,0,0,0,0 },
	{ 3,0,1,4,0,0,0,0,0,0 },{ 2,1,4,0,0,0,0,0,0,0 },{ 2,0,4,0,0,0,0,0,0,0 },{ 1,4,0,0,0,0,0,0,0,0 },
	{ 4,0,1,2,3,0,0,0,0,0 },{ 3,1,2,3,0,0,0,0,0,0 },{ 3,0,2,3,0,0,0,0,0,0 },{ 2,2,3,0,0,0,0,0,0,0 },
	{ 3,0,1,3,0,0,0,0,0,0 },{ 2,1,3,0,0,0,0,0,0,0 },{ 2,0,3,0,0,0,0,0,0,0 },{ 1,3,0,0,0,0,0,0,0,0 },
	{ 3,0,1,2,0,0,0,0,0,0 },{ 2,1,2,0,0,0,0,0,0,0 },{ 2,0,2,0,0,0,0,0,0,0 },{ 1,2,0,0,0,0,0,0,0,0 },
	{ 2,0,1,0,0,0,0,0,0,0 },{ 1,1,0,0,0,0,0,0,0,0 },{ 1,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0 } };

static const board_type support_from[9] = {
	(1 << 1) | (1 << 2) | (1 << 4) | (1 << 8) | (1 << 3) | (1 << 6),
	(1 << 0) | (1 << 2) | (1 << 4) | (1 << 7),
	(1 << 0) | (1 << 1) | (1 << 4) | (1 << 6) | (1 << 5) | (1 << 8),
	(1 << 0) | (1 << 6) | (1 << 4) | (1 << 5),
	(1 << 0) | (1 << 8) | (1 << 1) | (1 << 7) | (1 << 2) | (1 << 6) | (1 << 3) | (1 << 5),
	(1 << 2) | (1 << 8) | (1 << 4) | (1 << 3),
	(1 << 0) | (1 << 3) | (1 << 4) | (1 << 2) | (1 << 7) | (1 << 8),
	(1 << 6) | (1 << 8) | (1 << 4) | (1 << 1),
	(1 << 6) | (1 << 7) | (1 << 4) | (1 << 0) | (1 << 2) | (1 << 5) };

static const board_type rays_from[9][4] = {
	{ (1 << 1) | (1 << 2), (1 << 4) | (1 << 8), (1 << 3) | (1 << 6), 0 },
	{ (1 << 0) | (1 << 2), (1 << 4) | (1 << 7), 0, 0 },
	{ (1 << 0) | (1 << 1), (1 << 4) | (1 << 6), (1 << 5) | (1 << 8), 0 },
	{ (1 << 0) | (1 << 6), (1 << 4) | (1 << 5), 0, 0 },
	{ (1 << 0) | (1 << 8), (1 << 1) | (1 << 7), (1 << 2) | (1 << 6), (1 << 3) | (1 << 5) },
	{ (1 << 2) | (1 << 8), (1 << 4) | (1 << 3), 0, 0 },
	{ (1 << 0) | (1 << 3), (1 << 4) | (1 << 2), (1 << 7) | (1 << 8), 0 },
	{ (1 << 6) | (1 << 8), (1 << 4) | (1 << 1), 0, 0 },
	{ (1 << 6) | (1 << 7), (1 << 4) | (1 << 0), (1 << 2) | (1 << 5), 0 } };


#endif

